{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","mostrarResumen","seccionAnterior","document","querySelector","classList","remove","add","tabAnterior","querySelectorAll","forEach","enlace","addEventListener","e","preventDefault","parseInt","target","dataset","paso","async","resultado","fetch","db","json","servicio","id","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","idServicio","onclick","seleccionarServicio","appendChild","error","console","log","elemento","tagName","parentElement","contains","eliminarServicio","agregarServicio","firstElementChild","nextElementSibling","filter","servicioObj","resumenDiv","Object","values","includes","noServicios"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina = 1;\r\n\r\nconst cita = {\r\n  nombre: \"\",\r\n  fecha: \"\",\r\n  hora: \"\",\r\n  servicios: [],\r\n};\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  iniciarApp();\r\n});\r\n\r\nfunction iniciarApp() {\r\n  mostrarServicios();\r\n\r\n  // Resaclta el Div actual según el tab al que se presiona\r\n  mostrarSeccion();\r\n\r\n  // Oculta o muestra una sección según el tab seleccionado\r\n  cambiarSeccion();\r\n\r\n  // Paginación botones siguiente y anterior\r\n  paginaSiguiente();\r\n\r\n  paginaAnterior();\r\n\r\n  // Comprueba la página actual para ocultar o mostrar la paginación\r\n  botonesPaginador();\r\n\r\n  // Muestra el resumen de la cita o mensaje de error en caso de no pasar la validación\r\n  mostrarResumen();\r\n}\r\n\r\nfunction mostrarSeccion() {\r\n  // Eliminar mostrar-seccion de la sección anterior\r\n  const seccionAnterior = document.querySelector(\".mostrar-seccion\");\r\n  if (seccionAnterior) {\r\n    seccionAnterior.classList.remove(\"mostrar-seccion\");\r\n  }\r\n\r\n  const seccionActual = document.querySelector(`#paso-${pagina}`);\r\n  seccionActual.classList.add(\"mostrar-seccion\");\r\n\r\n  // Elimina la clase de actual en el tab anterior\r\n  const tabAnterior = document.querySelector(\".tabs button.actual\");\r\n  if (tabAnterior) {\r\n    tabAnterior.classList.remove(\"actual\");\r\n  }\r\n\r\n  // Resalta el Tab actual\r\n  const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\r\n  tab.classList.add(\"actual\");\r\n}\r\n\r\nfunction cambiarSeccion() {\r\n  const enlaces = document.querySelectorAll(\".tabs button\");\r\n\r\n  // El addEventListener se agrega solo sobre 1 elemento, no sobre una colección, por ello iteramos sobre enlaces.\r\n  enlaces.forEach((enlace) => {\r\n    enlace.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      pagina = parseInt(e.target.dataset.paso);\r\n\r\n      // Agregar la clase de actual en el nuevo tab\r\n      mostrarSeccion();\r\n\r\n      botonesPaginador();\r\n    });\r\n  });\r\n}\r\n\r\nasync function mostrarServicios() {\r\n  try {\r\n    const resultado = await fetch(\"./servicios.json\");\r\n    const db = await resultado.json();\r\n    // Con la desestructuración extraemos el valor y creamos la variable en un solo paso\r\n    const { servicios } = db;\r\n\r\n    // Generamos el Html\r\n    servicios.forEach((servicio) => {\r\n      const { id, nombre, precio } = servicio;\r\n\r\n      // DOM Scripting\r\n      // Generamos el nombre del servicio\r\n      const nombreServicio = document.createElement(\"P\");\r\n      nombreServicio.textContent = nombre;\r\n      nombreServicio.classList.add(\"nombre-servicio\");\r\n\r\n      // Generamos el precio del servicio\r\n      const precioServicio = document.createElement(\"P\");\r\n      precioServicio.textContent = `$ ${precio}`;\r\n      precioServicio.classList.add(\"precio-servicio\");\r\n\r\n      // Generamos el div contenedor del servicio\r\n      const servicioDiv = document.createElement(\"DIV\");\r\n      servicioDiv.classList.add(\"servicio\");\r\n      servicioDiv.dataset.idServicio = id;\r\n\r\n      // Cuando hacemos click en servicioDiv se ejecutartá la función seleccionarServicio\r\n      servicioDiv.onclick = seleccionarServicio;\r\n\r\n      // Inyectamos precio y nombre en el div de servicio\r\n      servicioDiv.appendChild(nombreServicio);\r\n      servicioDiv.appendChild(precioServicio);\r\n\r\n      // Inyectamos el div en el Html\r\n      document.querySelector(\"#servicios\").appendChild(servicioDiv);\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nfunction seleccionarServicio(e) {\r\n  let elemento;\r\n\r\n  // Forzamos que el elemento al cual le damos click sea el DIV\r\n  if (e.target.tagName === \"P\") {\r\n    elemento = e.target.parentElement;\r\n  } else {\r\n    elemento = e.target;\r\n  }\r\n\r\n  if (elemento.classList.contains(\"seleccionado\")) {\r\n    elemento.classList.remove(\"seleccionado\");\r\n\r\n    const id = parseInt(elemento.dataset.idServicio);\r\n\r\n    eliminarServicio(id);\r\n  } else {\r\n    elemento.classList.add(\"seleccionado\");\r\n\r\n    const servicioObj = {\r\n      id: parseInt(elemento.dataset.idServicio),\r\n      nombre: elemento.firstElementChild.textContent,\r\n      precio: elemento.firstElementChild.nextElementSibling.textContent,\r\n    };\r\n    // console.log(servicioObj);\r\n\r\n    agregarServicio(servicioObj);\r\n  }\r\n}\r\n\r\nfunction eliminarServicio(id) {\r\n  const { servicios } = cita;\r\n  cita.servicios = servicios.filter((servicio) => servicio.id !== id);\r\n\r\n  console.log(cita);\r\n}\r\n\r\nfunction agregarServicio(servicioObj) {\r\n  const { servicios } = cita;\r\n  cita.servicios = [...servicios, servicioObj];\r\n  console.log(cita);\r\n}\r\n\r\nfunction paginaSiguiente() {\r\n  const paginaSiguiente = document.querySelector(\"#siguiente\");\r\n  paginaSiguiente.addEventListener(\"click\", () => {\r\n    pagina++; // Incrementamos la página\r\n\r\n    botonesPaginador(); // Volevmos a comprobar los btn del paginador\r\n  });\r\n}\r\n\r\nfunction paginaAnterior() {\r\n  const paginaAnterior = document.querySelector(\"#anterior\");\r\n  paginaAnterior.addEventListener(\"click\", () => {\r\n    pagina--;\r\n\r\n    botonesPaginador();\r\n  });\r\n}\r\n\r\nfunction botonesPaginador() {\r\n  const paginaSiguiente = document.querySelector(\"#siguiente\");\r\n  const paginaAnterior = document.querySelector(\"#anterior\");\r\n\r\n  if (pagina === 1) {\r\n    paginaAnterior.classList.add(\"ocultar\");\r\n  } else if (pagina === 3) {\r\n    paginaSiguiente.classList.add(\"ocultar\");\r\n    paginaAnterior.classList.remove(\"ocultar\");\r\n  } else {\r\n    paginaAnterior.classList.remove(\"ocultar\");\r\n    paginaSiguiente.classList.remove(\"ocultar\");\r\n  }\r\n  mostrarSeccion(); //Cambia la sección que se muestra por la de la página\r\n}\r\n\r\nfunction mostrarResumen() {\r\n  // Destructuring\r\n  const { nombre, fecha, hora, servicios } = cita;\r\n\r\n  const resumenDiv = document.querySelector(\".contenido-resumen\");\r\n\r\n  // Validación\r\n\r\n  if (Object.values(cita).includes(\"\")) {\r\n    // Object.values nos devuelve un Array con los valores del objeto, sin sus llaves (Keys). Básicamente en la línea anterior evaluamos si el objeto cita nos entrega un array con algún campo vacío.\r\n    const noServicios = document.createElement(\"P\");\r\n    noServicios.textContent = \"Por favor complete todos los datos\";\r\n\r\n    noServicios.classList.add(\"invalidar-cita\");\r\n\r\n    // Agregar a resumen Div\r\n    resumenDiv.appendChild(noServicios);\r\n  }\r\n}\r\n"]}